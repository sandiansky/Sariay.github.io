<!--There may be a bug, but don't worry, QiLing(器灵) says that it can work normally!-->



	<!DOCTYPE html>
	<html>
		

<head>
	<title>SONGCI</title>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="apple-mobile-web-app-title" content="Amaze UI" />
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no">
    <meta name="author" content="songci">
    <meta name="keywords" content="" />
    <meta name="description" content="" />
   	<!-- css -->
	<link rel="stylesheet" href="/css/style.css">	
	
	<!-- favicon -->
	<link href="/img/favicon.ico" rel="Shortcut Icon" type="image/ico">
	
	<!-- font-awesome -->
	<link href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
<link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head>



	<body>	
		<!--Preloader-->
<div id="preloader">
	<div id="status">
		<img alt="preloader" src="/img/logo.png">
	</div>
</div>
<!--Preloader end-->


	<header id="header-bg-1" style="background-image: url( /img/1.jpg );">	

	
		<div id="cd-logo"><a href="/"><img src="/img/logo.png" alt="Logo"></a></div>
	
		
		
 		<p class="motto"></p>
	
	
	
		
			<p class="page-name"></p>
		
		
	
</header>

<div id="cd-nav">
	<a href="#0" title="menu" class="cd-nav-trigger"><span></span></a>

	<nav id="cd-main-nav">
		<ul>
			
      		<li class="fa fa-/">
           		<a href="/" title="主页">主页</a>	
      		</li>
    		
      		<li class="fa fa-/archives">
           		<a href="/archives" title="归档">归档</a>	
      		</li>
    		
      		<li class="fa fa-/categories">
           		<a href="/categories" title="分类">分类</a>	
      		</li>
    		
      		<li class="fa fa-/tags">
           		<a href="/tags" title="标签">标签</a>	
      		</li>
    		
      		<li class="fa fa-/about">
           		<a href="/about" title="关于">关于</a>	
      		</li>
    		
      		<li class="fa fa-/gallery">
           		<a href="/gallery" title="相册">相册</a>	
      		</li>
    		
    		
        	
            	<li class="fa fa-/search"><a href="javascript:;" class="popup-trigger" title="Search">搜索</a></li>
        	
		</ul>
	</nav>
</div>


		<main>
		<div class="page-container">
		
	<!-- content srart -->
<div class="am-g am-g-fixed blog-fixed">
	<div class="am-u-md-12 am-u-sm-12">

		
			<article class="am-g blog-entry-article">

				<div class="am-u-lg-6 am-u-md-12 am-u-sm-12 blog-entry-img">
					<img src="https://annie-header-bg-1253939655.cos.ap-beijing.myqcloud.com/68.jpg" class="am-u-sm-12">
				</div>	

				<div class="am-u-lg-6 am-u-md-12 am-u-sm-12 blog-entry-text">
					<a href="/2018/09/08/起风了/" itemprop="url">
	<time datetime="2018-09-08T08:49:36.000Z" itemprop="datePublished">
  		2018-09-08
  </time>
</a>    

					
	
		<a href="/2018/09/08/起风了/" itemprop="url">		
			起风了		
		</a>
	




					
						<p>
							
								起风了 (原曲： 高桥优 -《ヤキモチ》) - 买辣椒也用券 
词：米果 
曲：高桥优 
这一路上走走停停 
顺着少年漂流的痕迹 
迈出车站的前一刻 
竟有些犹豫 
不禁笑这近乡情怯 
仍无可避免 
而长野的天 
依旧那么暖 
风吹起了从前 
从前初识这世间 
万般流连 
看着天边似在眼前 
也甘愿赴汤蹈火去走它一遍 
如今走过这世间 
万般流连 
翻过岁月不同侧脸 
措不及防闯入你的笑颜 
我曾	
							  
						</p> 
					

					
						<span class="continue-read">      	
							<a href="/2018/09/08/起风了/" class="pull-right">
								read more
							</a>		
						</span>
					         		
				</div>
		
			</article>
		
			<article class="am-g blog-entry-article">

				<div class="am-u-lg-6 am-u-md-12 am-u-sm-12 blog-entry-img">
					<img src="https://1024-1253939655.cos.ap-beijing.myqcloud.com/hexo-theme-Annie/poem2.png" class="am-u-sm-12">
				</div>	

				<div class="am-u-lg-6 am-u-md-12 am-u-sm-12 blog-entry-text">
					<a href="/2018/08/27/Annie主题使用说明/" itemprop="url">
	<time datetime="2018-08-27T12:16:19.000Z" itemprop="datePublished">
  		2018-08-27
  </time>
</a>    

					
	
		<a href="/2018/08/27/Annie主题使用说明/" itemprop="url">		
			Annie主题使用说明		
		</a>
	




					
						<p>
							
								
首页的使用

首页文章展示有两种模式：图文模式cart和纯净模式pure。默认图文模式（index-style: cart），你只需编辑主题目录下的_config.yml，设置index-style的参数，即可使用或扩展相关的文章展示模式。

分类页的使用

执行命令，创建分类页
$ hexo new page categories

然后编辑站点目录下的source/categories/in	
							  
						</p> 
					

					
						<span class="continue-read">      	
							<a href="/2018/08/27/Annie主题使用说明/" class="pull-right">
								read more
							</a>		
						</span>
					         		
				</div>
		
			</article>
		
			<article class="am-g blog-entry-article">

				<div class="am-u-lg-6 am-u-md-12 am-u-sm-12 blog-entry-img">
					<img src="https://1024-1253939655.cos.ap-beijing.myqcloud.com/hexo-theme-Annie/Annie-pen.jpg" class="am-u-sm-12">
				</div>	

				<div class="am-u-lg-6 am-u-md-12 am-u-sm-12 blog-entry-text">
					<a href="/2018/08/10/博客开发问题记录/" itemprop="url">
	<time datetime="2018-08-10T13:33:36.000Z" itemprop="datePublished">
  		2018-08-10
  </time>
</a>    

					
	
		<a href="/2018/08/10/博客开发问题记录/" itemprop="url">		
			博客开发问题记录		
		</a>
	




					
						<p>
							
								
问题1：主页有样式，文章详情页、归档页等无样式
head.ejs中使用css()函数，而非标签

问题2：如何使用CSS将页脚固定在页面底部
方法W3Cschool

问题3：按月归档

问题4：motto插件不能正确使用
将motto.ejs在页面最后引入即可

问题5：搜索按钮无法正确响应
请确保搜索脚本的正确载入search.js

问题6：响应式设计
编写相应页的媒体样式@media(m	
							  
						</p> 
					

					
						<span class="continue-read">      	
							<a href="/2018/08/10/博客开发问题记录/" class="pull-right">
								read more
							</a>		
						</span>
					         		
				</div>
		
			</article>
		
			<article class="am-g blog-entry-article">

				<div class="am-u-lg-6 am-u-md-12 am-u-sm-12 blog-entry-img">
					<img src="https://1024-1253939655.cos.ap-beijing.myqcloud.com/hexo-theme-Annie/Annie-code.jpg" class="am-u-sm-12">
				</div>	

				<div class="am-u-lg-6 am-u-md-12 am-u-sm-12 blog-entry-text">
					<a href="/2018/08/06/hexo-theme-Annie/" itemprop="url">
	<time datetime="2018-08-06T06:13:56.000Z" itemprop="datePublished">
  		2018-08-06
  </time>
</a>    

					
	
		<a href="/2018/08/06/hexo-theme-Annie/" itemprop="url">		
			hexo-theme-Annie		
		</a>
	




					
						<p>
							
								todo



基本模块
细分
状态




layout
head、header、footer
y


index
index
y


page
page
y


post
post
代码显示问题-y


archive
archive
样式待调整-y


categoty
archive
y


tag
archive
y


扩展模块




comment
gitcomment、valin	
							  
						</p> 
					

					
						<span class="continue-read">      	
							<a href="/2018/08/06/hexo-theme-Annie/" class="pull-right">
								read more
							</a>		
						</span>
					         		
				</div>
		
			</article>
		
			<article class="am-g blog-entry-article">

				<div class="am-u-lg-6 am-u-md-12 am-u-sm-12 blog-entry-img">
					<img src="https://1024-1253939655.cos.ap-beijing.myqcloud.com/hexo-theme-Annie/Annie-rose.jpg" class="am-u-sm-12">
				</div>	

				<div class="am-u-lg-6 am-u-md-12 am-u-sm-12 blog-entry-text">
					<a href="/2018/08/02/Github入门术语/" itemprop="url">
	<time datetime="2018-08-02T11:14:05.000Z" itemprop="datePublished">
  		2018-08-02
  </time>
</a>    

					
	
		<a href="/2018/08/02/Github入门术语/" itemprop="url">		
			Github入门术语		
		</a>
	




					
						<p>
							
								什么是Git 
Git是一个版本控制系统（Version Control System），版本控制即记录一个或若干文件内容变化的情况。Git属于分布式版本控制系统，客户端提取文件时总是镜像的完整仓库。
Repository  
仓库，储存项目的空间。建立项目之前需要建立仓库，一个项目对应一个仓库。
Issues  
针对于项目bug，审查者提出的问题。or审查者希望项目增加新的特性，而提出的建议。	
							  
						</p> 
					

					
						<span class="continue-read">      	
							<a href="/2018/08/02/Github入门术语/" class="pull-right">
								read more
							</a>		
						</span>
					         		
				</div>
		
			</article>
		
			<article class="am-g blog-entry-article">

				<div class="am-u-lg-6 am-u-md-12 am-u-sm-12 blog-entry-img">
					<img src="/img/cart_cover.jpg" class="am-u-sm-12">
				</div>	

				<div class="am-u-lg-6 am-u-md-12 am-u-sm-12 blog-entry-text">
					<a href="/2018/07/31/That-boy/" itemprop="url">
	<time datetime="2018-07-31T15:23:46.000Z" itemprop="datePublished">
  		2018-07-31
  </time>
</a>    

					
	
		<a href="/2018/07/31/That-boy/" itemprop="url">		
			That boy		
		</a>
	




					
						<p>
							
								
 
这是一篇图片测试文章
	
							  
						</p> 
					

					
						<span class="continue-read">      	
							<a href="/2018/07/31/That-boy/" class="pull-right">
								read more
							</a>		
						</span>
					         		
				</div>
		
			</article>
		
			<article class="am-g blog-entry-article">

				<div class="am-u-lg-6 am-u-md-12 am-u-sm-12 blog-entry-img">
					<img src="/img/cart_cover.jpg" class="am-u-sm-12">
				</div>	

				<div class="am-u-lg-6 am-u-md-12 am-u-sm-12 blog-entry-text">
					<a href="/2018/07/30/博客功能扩展/" itemprop="url">
	<time datetime="2018-07-29T16:18:51.000Z" itemprop="datePublished">
  		2018-07-30
  </time>
</a>    

					
	
		<a href="/2018/07/30/博客功能扩展/" itemprop="url">		
			博客功能扩展		
		</a>
	




					
						<p>
							
								任务清单（todo list）

 归档页
 分类页
 标签页
 相册页 2018年7月30日
 搜索页 2018年7月31日
 时间页
 安装hexo-related-popular-posts插件 2018年8月1日
 文章加密访问、前端加密类hexo-encrypt、hexo-blog-encrypt（废弃的API，放弃折腾）
 hexo-pdf插件：pdf预览
 返回顶部 2018年8月3	
							  
						</p> 
					

					
						<span class="continue-read">      	
							<a href="/2018/07/30/博客功能扩展/" class="pull-right">
								read more
							</a>		
						</span>
					         		
				</div>
		
			</article>
		
			<article class="am-g blog-entry-article">

				<div class="am-u-lg-6 am-u-md-12 am-u-sm-12 blog-entry-img">
					<img src="/img/cart_cover.jpg" class="am-u-sm-12">
				</div>	

				<div class="am-u-lg-6 am-u-md-12 am-u-sm-12 blog-entry-text">
					<a href="/2018/07/26/李白诗选/" itemprop="url">
	<time datetime="2018-07-26T15:58:02.000Z" itemprop="datePublished">
  		2018-07-26
  </time>
</a>    

					
	
		<a href="/2018/07/26/李白诗选/" itemprop="url">		
			李白诗选		
		</a>
	




					
						<p>
							
								《宣州谢朓楼饯别校书叔云 》李白
弃我去者，昨日之日不可留;  
乱我心者，今日之日多烦忧。  
长风万里送秋雁，对此可以酣高楼。  
蓬莱文章建安骨，中间小谢又清发。  
俱怀逸兴壮思飞，欲上青天揽明月。  
抽刀断水水更流，举杯销愁愁更愁。  
人生在世不称意，明朝散发弄扁舟。
	
							  
						</p> 
					

					
						<span class="continue-read">      	
							<a href="/2018/07/26/李白诗选/" class="pull-right">
								read more
							</a>		
						</span>
					         		
				</div>
		
			</article>
		
			<article class="am-g blog-entry-article">

				<div class="am-u-lg-6 am-u-md-12 am-u-sm-12 blog-entry-img">
					<img src="/img/cart_cover.jpg" class="am-u-sm-12">
				</div>	

				<div class="am-u-lg-6 am-u-md-12 am-u-sm-12 blog-entry-text">
					<a href="/2018/07/25/秦时明月/" itemprop="url">
	<time datetime="2018-07-25T15:57:16.000Z" itemprop="datePublished">
  		2018-07-25
  </time>
</a>    

					
	
		<a href="/2018/07/25/秦时明月/" itemprop="url">		
			秦时明月		
		</a>
	




					
						<p>
							
								空页测试
	
							  
						</p> 
					

					
						<span class="continue-read">      	
							<a href="/2018/07/25/秦时明月/" class="pull-right">
								read more
							</a>		
						</span>
					         		
				</div>
		
			</article>
		
			<article class="am-g blog-entry-article">

				<div class="am-u-lg-6 am-u-md-12 am-u-sm-12 blog-entry-img">
					<img src="/img/cart_cover.jpg" class="am-u-sm-12">
				</div>	

				<div class="am-u-lg-6 am-u-md-12 am-u-sm-12 blog-entry-text">
					<a href="/2018/07/18/跨站脚本攻击/" itemprop="url">
	<time datetime="2018-07-18T11:36:03.000Z" itemprop="datePublished">
  		2018-07-18
  </time>
</a>    

					
	
		<a href="/2018/07/18/跨站脚本攻击/" itemprop="url">		
			跨站脚本攻击		
		</a>
	




					
						<p>
							
								一、环境说明虚拟环境：SEEDUbuntu16.04+VirtualBox
攻击网站：XSS Site
环境搭建：配置步骤见于《作业报告》的参考资料[8]，即分别下载虚拟机VirtualBox和操作系统SEEDUbuntu16.04，按照参考资料[8]进行安装即可。最后搭建的虚拟环境截图如下：

​    
网站搭建：搭建及配置步骤见于《作业报告》的参考资料[9]。最后搭建的攻击网站截图如下：  	
							  
						</p> 
					

					
						<span class="continue-read">      	
							<a href="/2018/07/18/跨站脚本攻击/" class="pull-right">
								read more
							</a>		
						</span>
					         		
				</div>
		
			</article>
		
			<article class="am-g blog-entry-article">

				<div class="am-u-lg-6 am-u-md-12 am-u-sm-12 blog-entry-img">
					<img src="/img/cart_cover.jpg" class="am-u-sm-12">
				</div>	

				<div class="am-u-lg-6 am-u-md-12 am-u-sm-12 blog-entry-text">
					<a href="/2018/07/14/安装centos操作系统/" itemprop="url">
	<time datetime="2018-07-14T07:06:12.000Z" itemprop="datePublished">
  		2018-07-14
  </time>
</a>    

					
	
		<a href="/2018/07/14/安装centos操作系统/" itemprop="url">		
			安装centos操作系统		
		</a>
	




					
						<p>
							
								1、安装包下载传送门
2、安装教程，参考传送门
3、安装增强功能（共享粘贴板、共享文件夹、屏幕自动调整传送门
4、如果3步骤后无法实现全屏，参考传送门
5、如果4步骤中出错，请检查centos系统是否可以联网。

联网问题：

[ ] 传送门1

[ ] 传送门2

没有可用软件包 kmod-fglrx问题：阅读官网教程导入软件包。

[ ] 传送门


附：教程中偶有出入，请对照自己系统比较分析	
							  
						</p> 
					

					
						<span class="continue-read">      	
							<a href="/2018/07/14/安装centos操作系统/" class="pull-right">
								read more
							</a>		
						</span>
					         		
				</div>
		
			</article>
		
			<article class="am-g blog-entry-article">

				<div class="am-u-lg-6 am-u-md-12 am-u-sm-12 blog-entry-img">
					<img src="/img/cart_cover.jpg" class="am-u-sm-12">
				</div>	

				<div class="am-u-lg-6 am-u-md-12 am-u-sm-12 blog-entry-text">
					<a href="/2018/06/08/中文测试/" itemprop="url">
	<time datetime="2018-06-07T16:00:00.000Z" itemprop="datePublished">
  		2018-06-08
  </time>
</a>    

					
	
		<a href="/2018/06/08/中文测试/" itemprop="url">		
			中文测试		
		</a>
	




					
						<p>
							
								　十年前，她怀揣着美梦来到这个陌生的城市。十年后，她的梦想实现了一半，却依然无法融入这个城市。作为十年后异乡的陌生人，她将何去何从？   
​    在她十八岁那年，她不顾父母的反对，依然跟随闺蜜来到了她梦想中的天堂。尽管在路途中她还在为父母要和她断绝关系的话感到难过，但是在她亲眼目睹城市的繁华之后，她决心要赚很多钱，把父母接到城市，让父母知道她的选择是正确的。     
​    可是很快，她就	
							  
						</p> 
					

					
						<span class="continue-read">      	
							<a href="/2018/06/08/中文测试/" class="pull-right">
								read more
							</a>		
						</span>
					         		
				</div>
		
			</article>
		
			<article class="am-g blog-entry-article">

				<div class="am-u-lg-6 am-u-md-12 am-u-sm-12 blog-entry-img">
					<img src="/img/cart_cover.jpg" class="am-u-sm-12">
				</div>	

				<div class="am-u-lg-6 am-u-md-12 am-u-sm-12 blog-entry-text">
					<a href="/2018/05/01/hexo主题添加评论功能/" itemprop="url">
	<time datetime="2018-05-01T04:54:05.000Z" itemprop="datePublished">
  		2018-05-01
  </time>
</a>    

					
	
		<a href="/2018/05/01/hexo主题添加评论功能/" itemprop="url">		
			[post]hexo主题添加评论功能		
		</a>
	




					
						<p>
							
								<p>前言：本文简要介绍livere评论系统的的添加，如您想要添加其他评论系统，请拉至文末，阅读相关博文（或者查阅更多资料）</p>
							  
						</p> 
					

					
						<span class="continue-read">      	
							<a href="/2018/05/01/hexo主题添加评论功能/" class="pull-right">
								read more
							</a>		
						</span>
					         		
				</div>
		
			</article>
		
			<article class="am-g blog-entry-article">

				<div class="am-u-lg-6 am-u-md-12 am-u-sm-12 blog-entry-img">
					<img src="/img/cart_cover.jpg" class="am-u-sm-12">
				</div>	

				<div class="am-u-lg-6 am-u-md-12 am-u-sm-12 blog-entry-text">
					<a href="/2018/04/30/中文测试一/" itemprop="url">
	<time datetime="2018-04-30T14:25:52.000Z" itemprop="datePublished">
  		2018-04-30
  </time>
</a>    

					
	
		<a href="/2018/04/30/中文测试一/" itemprop="url">		
			[post]中文测试一		
		</a>
	




					
						<p>
							
								题都城南庄​    崔护
​    去年今日此门中，人面桃花相映红。
​    人面不知何处去，桃花依旧笑春风。
	
							  
						</p> 
					

					
						<span class="continue-read">      	
							<a href="/2018/04/30/中文测试一/" class="pull-right">
								read more
							</a>		
						</span>
					         		
				</div>
		
			</article>
		
			<article class="am-g blog-entry-article">

				<div class="am-u-lg-6 am-u-md-12 am-u-sm-12 blog-entry-img">
					<img src="/img/cart_cover.jpg" class="am-u-sm-12">
				</div>	

				<div class="am-u-lg-6 am-u-md-12 am-u-sm-12 blog-entry-text">
					<a href="/2018/04/30/中文测试二/" itemprop="url">
	<time datetime="2018-04-30T14:25:52.000Z" itemprop="datePublished">
  		2018-04-30
  </time>
</a>    

					
	
		<a href="/2018/04/30/中文测试二/" itemprop="url">		
			[post]中文测试二		
		</a>
	




					
						<p>
							
								木兰花​    纳兰性德
​    人生若只如初见，何事秋风悲画扇。
​    等闲变却故人心，却道古人心易变。
​    骊山语罢清宵半，泪雨霖铃终不怨。
​    何如薄幸锦衣郎，比翼连枝当日愿。
	
							  
						</p> 
					

					
						<span class="continue-read">      	
							<a href="/2018/04/30/中文测试二/" class="pull-right">
								read more
							</a>		
						</span>
					         		
				</div>
		
			</article>
		
			<article class="am-g blog-entry-article">

				<div class="am-u-lg-6 am-u-md-12 am-u-sm-12 blog-entry-img">
					<img src="/img/cart_cover.jpg" class="am-u-sm-12">
				</div>	

				<div class="am-u-lg-6 am-u-md-12 am-u-sm-12 blog-entry-text">
					<a href="/2018/03/31/hello-world/" itemprop="url">
	<time datetime="2018-03-31T15:23:46.000Z" itemprop="datePublished">
  		2018-03-31
  </time>
</a>    

					
	
		<a href="/2018/03/31/hello-world/" itemprop="url">		
			Hello World		
		</a>
	




					
						<p>
							
								Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub.
Quick	
							  
						</p> 
					

					
						<span class="continue-read">      	
							<a href="/2018/03/31/hello-world/" class="pull-right">
								read more
							</a>		
						</span>
					         		
				</div>
		
			</article>
		     

		

        
  
  
	
	</div>
</div>
<!-- content end -->

	<!--图文风格-->

		</div>
		<footer>
	<div class="blog-text-center">
		<div class="theme-annie-social">
				
				
					<a href="http://github.com/" title="Github" target="_blank"><i class="fa fa-github"></i>&nbsp;</a>
					
				
					<a href="http://github.com/" title="Weibo" target="_blank"><i class="fa fa-weibo"></i>&nbsp;</a>
				
				
					<a href="http://github.com/" title="Email" target="_blank"><i class="fa fa-envelope-o"></i>&nbsp;</a>
					
				
					<a href="http://github.com/" title="QQ" target="_blank"><i class="fa fa-qq"></i>&nbsp;</a>
					
				
					<a href="http://github.com/" title="Twitter" target="_blank"><i class="fa fa-twitter"></i>&nbsp;</a>
						
				
		</div>
	</div>

	<div  class="blog-text-center">
		<div class="theme-annie-copyright">
			
				&copy; 2017 - 2018, content by songci. All Rights Reserved.			       	
			
		</div>
	</div>

	<div class="blog-text-center">
		<div class="theme-annie-copyright">
			<a href="http://hexo.io/" title="Hexo" target="_blank" rel="noopener">Hexo</a> Theme <a href="https://github.com/Sariay/hexo-theme-Annie" title="Annie" target="_blank" rel="noopener">Annie</a> by Sariay.		
		</div>
	</div>
</footer>






		</main>

		<!-- <script src="http://code.jquery.com/jquery-2.1.1.min.js" type="text/javascript"></script> -->

<script>window.jQuery || document.write('<script src="/js/jquery-2.1.1.min.js"><\/script>')</script>

<style>
	.motto {
		color: #000000;
		font-size: 20px;
		margin: 60px 20px 0 20px;
		line-height: 1.4;
		font-family: 'Fang Song', 'Song', 'STSong', sans-serif;
		text-align: center;
	}
</style>


	<script src="/js/motto.js"></script>
	<script>
		$(".motto").html(getMingYanContent());
	</script>	



    <div class="popup search-popup local-search-popup">
    <span class="popup-btn-close">
      ESC
    </span>
    <div class="container">
      <div class="col-md-8 col-md-offset-2">

        <div class="local-search-header clearfix">
            <span class="search-icon"></span>
            <div class="local-search-input-wrapper">
              <input autocomplete="off" placeholder="Search..." type="text" id="local-search-input">
            </div>
        </div>

        <div id="local-search-result"></div>

      </div>
    </div>
</div>

<script src="/js/ziploader.js"></script>


  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.json";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').fadeOut(300);
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $('.popup').fadeIn(300);
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // get search zip version
    $.get('/searchVersion.txt?t=' + (+new Date()), function(res) {
      if (localStorage.getItem('searchVersion') !== res) {
        localStorage.setItem('searchVersion', res);
        initSearchJson();
      }
    });

    function initSearchJson () {
      initLoad(['/search.zip'], {
        loadOptions: {
          success: function(obj) {
            localStorage.setItem('searchJson', obj['search.json'])
          },
          error: function(e) {
            return console.log(e)
          }
        },
        returnOptions: {
          'json': TYPE_TEXT
        },
        mimeOptions:{
          'json':'application/json'
        }
      })
    }

    // search function;
    var searchFunc = function(search_id, content_id) {
      'use strict';

      isfetched = true;
      var datas = JSON.parse(localStorage.getItem('searchJson'));
      console.log(search_id)
      var input = document.getElementById(search_id);
      var resultContent = document.getElementById(content_id);
      var inputEventFunction = function() {
        var searchText = input.value.trim().toLowerCase();
        var keywords = searchText.split(/[\s\-]+/);
        if (keywords.length > 1) {
          keywords.push(searchText);
        }
        var resultItems = [];
        if (searchText.length > 0) {
          // perform local searching
          datas.forEach(function(data) {
            var isMatch = false;
            var hitCount = 0;
            var searchTextCount = 0;
            var title = data.title ? data.title.trim() : '';
            var titleInLowerCase = title.toLowerCase();
            var content = data.content ? data.content.trim().replace(/<[^>]+>/g,"") : '';
            var contentInLowerCase = content.toLowerCase();
            var articleUrl = decodeURIComponent(data.url);
            var indexOfTitle = [];
            var indexOfContent = [];
            // only match articles with not empty titles
            keywords.forEach(function(keyword) {
              function getIndexByWord(word, text, caseSensitive) {
                var wordLen = word.length;
                if (wordLen === 0) {
                  return [];
                }
                var startPosition = 0, position = [], index = [];
                if (!caseSensitive) {
                  text = text.toLowerCase();
                  word = word.toLowerCase();
                }
                while ((position = text.indexOf(word, startPosition)) > -1) {
                  index.push({position: position, word: word});
                  startPosition = position + wordLen;
                }
                return index;
              }

              indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
              indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
            });
            if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
              isMatch = true;
              hitCount = indexOfTitle.length + indexOfContent.length;
            }

            // show search results

            if (isMatch) {
              // sort index by position of keyword

              [indexOfTitle, indexOfContent].forEach(function (index) {
                index.sort(function (itemLeft, itemRight) {
                  if (itemRight.position !== itemLeft.position) {
                    return itemRight.position - itemLeft.position;
                  } else {
                    return itemLeft.word.length - itemRight.word.length;
                  }
                });
              });

              // merge hits into slices

              function mergeIntoSlice(text, start, end, index) {
                var item = index[index.length - 1];
                var position = item.position;
                var word = item.word;
                var hits = [];
                var searchTextCountInSlice = 0;
                while (position + word.length <= end && index.length != 0) {
                  if (word === searchText) {
                    searchTextCountInSlice++;
                  }
                  hits.push({position: position, length: word.length});
                  var wordEnd = position + word.length;

                  // move to next position of hit

                  index.pop();
                  while (index.length != 0) {
                    item = index[index.length - 1];
                    position = item.position;
                    word = item.word;
                    if (wordEnd > position) {
                      index.pop();
                    } else {
                      break;
                    }
                  }
                }
                searchTextCount += searchTextCountInSlice;
                return {
                  hits: hits,
                  start: start,
                  end: end,
                  searchTextCount: searchTextCountInSlice
                };
              }

              var slicesOfTitle = [];
              if (indexOfTitle.length != 0) {
                slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
              }

              var slicesOfContent = [];
              while (indexOfContent.length != 0) {
                var item = indexOfContent[indexOfContent.length - 1];
                var position = item.position;
                var word = item.word;
                // cut out 100 characters
                var start = position - 20;
                var end = position + 80;
                if(start < 0){
                  start = 0;
                }
                if (end < position + word.length) {
                  end = position + word.length;
                }
                if(end > content.length){
                  end = content.length;
                }
                slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
              }

              // sort slices in content by search text's count and hits' count

              slicesOfContent.sort(function (sliceLeft, sliceRight) {
                if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                  return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                  return sliceRight.hits.length - sliceLeft.hits.length;
                } else {
                  return sliceLeft.start - sliceRight.start;
                }
              });

              // select top N slices in content

              var upperBound = parseInt('2');
              if (upperBound >= 0) {
                slicesOfContent = slicesOfContent.slice(0, upperBound);
              }

              // highlight title and content

              function highlightKeyword(text, slice) {
                var result = '';
                var prevEnd = slice.start;
                slice.hits.forEach(function (hit) {
                  result += text.substring(prevEnd, hit.position);
                  var end = hit.position + hit.length;
                  result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                  prevEnd = end;
                });
                result += text.substring(prevEnd, slice.end);
                return result;
              }

              var resultItem = '';

              if (slicesOfTitle.length != 0) {
                resultItem += "<li><a target='_blank' href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
              } else {
                resultItem += "<li><a target='_blank' href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
              }

              slicesOfContent.forEach(function (slice) {
                resultItem +=  "<p class=\"search-result\">" + highlightKeyword(content, slice) + "...</p>";
              });

              resultItem += "</li>";
              resultItems.push({
                item: resultItem,
                searchTextCount: searchTextCount,
                hitCount: hitCount,
                id: resultItems.length
              });
            }
          })
        };
        if (keywords.length === 1 && keywords[0] === "") {
          resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
        } else if (resultItems.length === 0) {
          resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /> no result </div>'
        } else {
          resultItems.sort(function (resultLeft, resultRight) {
            if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
              return resultRight.searchTextCount - resultLeft.searchTextCount;
            } else if (resultLeft.hitCount !== resultRight.hitCount) {
              return resultRight.hitCount - resultLeft.hitCount;
            } else {
              return resultRight.id - resultLeft.id;
            }
          });
          var searchResultList = '<ul class=\"search-result-list\">';
          resultItems.forEach(function (result) {
            searchResultList += result.item;
          })
          searchResultList += "</ul>";
          resultContent.innerHTML = searchResultList;
        }
      }

      if ('auto' === 'auto') {
        input.addEventListener('input', inputEventFunction);
      } else {
        $('.search-icon').click(inputEventFunction);
        input.addEventListener('keypress', function (event) {
          if (event.keyCode === 13) {
            inputEventFunction();
          }
        });
      }

      // remove loading animation
      $('body').css('overflow', '');

      proceedsearch();
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        $('.sb-close').click();
        searchFunc('local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>






<script src="/js/main.js"></script> 
	</body>
	</html>



